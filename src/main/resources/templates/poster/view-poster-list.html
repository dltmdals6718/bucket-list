<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <th:block th:insert="~{fragments/commonHead ::commonHead}"></th:block>
    <script src="/js/poster/view-poster-list.js"></script>
    <title>Title</title>
</head>
<body>
<div th:replace="~{fragments/header ::headerFragment}"></div>
<div>
    <input id="keyword" placeholder="키워드로 검색해보세요!">
    <button id="search-poster-btn">검색</button>
    <input id="tags" placeholder="태그로 검색해보세요!">
    <ul id="tag-list" class="px-0">
    </ul>
</div>
<ul>
    <li th:each="poster : ${posters}">
        <div>
            <img th:src="${poster.profileImg}" width="20" height="20">
            <a class="link-dark link-underline-opacity-0 m-0" href="#" th:utext="${poster.nickname}"></a>
            <span class="m-0 text-secondary" style="font-size: 10pt" th:utext="${poster.createdDate}"></span>
            <div class="text-truncate">
                <a class="link-dark link-underline-opacity-0" th:href="@{/posters/{id}(id = ${poster.posterId})}"
                   th:utext="${poster.title}"></a>
            </div>
            <ul class="px-0">
                <th:block th:each="tag : ${poster.tags}">
                    <li class="d-inline-flex px-2 me-1 my-1 border rounded bg-light-subtle">
                        <span class="text-secondary" th:utext="${tag}" style="font-size: 10pt">태그</span>
                    </li>
                </th:block>
            </ul>
        </div>
    </li>
</ul>
<div class="d-flex justify-content-between">
    <button id="prev-page-btn" class="btn border-0" th:classappend="${currentPage <= 1} ? disabled : ''">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left"
             viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                  d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
        </svg>
        Previous
    </button>
    <ul class="pagination my-auto flex-wrap">
        <li class="page-item" th:each="i : ${#numbers.sequence(startPage, endPage)}">
            <a th:if="${i != currentPage}"
               th:href="|/posters?page=${i}${tags != null ? '&tags=' + tags : ''}${keyword != null ? '&keyword=' + keyword : ''}|"
               class="link-dark link-underline-opacity-0 border px-2 py-1 mx-1"
               th:text="${i}">1</a>
            <a th:if="${i == currentPage}"
               class="link-dark link-underline-opacity-0 border px-2 py-1 mx-1 bg-primary-subtle"
               th:text="${i}">1</a>
        </li>
    </ul>
    <button id="next-page-btn" class="btn border-0" th:classappend="${currentPage >= totalPage} ? 'disabled' : ''">
        Next
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right"
             viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                  d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"/>
        </svg>
    </button>
</div>
</body>
</html>